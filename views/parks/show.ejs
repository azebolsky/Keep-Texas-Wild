<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href="https://fonts.googleapis.com/css?family=Squada+One&display=swap" rel="stylesheet">
    <title>Park Details</title>
</head>
<body>
    <header class="header">
        <nav id="parks-nav">
          <h3><%= park.parkName %></h3>
          <a href="/parks">View All Parks</a>
        </nav>
    </header>
    <section>
        <h3>Park Details</h3> 
            <div>Lake: </div>
            <div><%= park.hasLake %></div>
            <div>Amount of Trails: </div>
            <div><%= park.numTrails %></div>
            <div>Primitive Camping: </div>
            <div><%= park.hasPrimitiveCamping %></div>
            <div>See below reviews:</div>
    </section>
    <form action="/parks/<%= park._id %>/reviews" method="POST">
        <label>Add Review: </label>
        <input type="text" name="content">
        <label>Rating:</label>
        <select name="rating">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
        <input type="submit" value="Add Review">
    </form>
    <% if (park.reviews.length) { %>
        <table>
            <thead>
                <tr>
                    <th>Created At</th>
                    <th>Created By</th>
                    <th>Rating</th>
                    <th>Review</th>
                </tr>
            </thead>
            <tbody>
                <% park.reviews.forEach(function(p) { %>
                    <tr>
                    <td> <%= p.createdAt.toLocaleDateString() %> </td>
                    <td> <%= p.createdBy.name %> </td>
                    <td> <%= p.rating %> </td>
                    <td> <%= p.content %> </td>
                        <td><form action="/reviews/<%= p._id %>?_method=PUT" method="POST">
                            <input type="text" name="content" value="<%= p.content %> ">
                            <button type="submit">Update Review</button>
                        </form></td>
                        <td><form action="/reviews/<%= p._id %>?_method=DELETE" method="POST">
                            <button type="submit">Delete Review</button>
                        </form></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    <% } else { %>
        <h4>No Reviews Submitted Yet</h4>
    <% } %> 
</body>
</html>